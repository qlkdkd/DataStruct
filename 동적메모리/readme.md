# 13. 동적 메모리

## 동적 메모리의 개념
* 프로그램이 메모리를 할당받는 방법
    * 정적(stacic)
    * 동적(dynamic)
 

## 정적 메모리 할당
* 프로그램이 시작되기 전에 미리 정해진 크기의 메모리를 할당받는 것
* 메모리의 크기는 프로그램이 시작하기 전에 결정되며 프로그램의 실행 도중에 그 크기가 변경될 수는 없다.
```c
int sarray[10];
```
* 정적 메모리는 간편하지만 경우에 따라 비효율적
    * 예) 프로그램이 처리해야하는 입력의 크기를 미리 알 수 없음
        * 처음에 결정된 크기보다 더 큰 입력이 들어온다면 처리하지 못하고, 더 작은 입력이 들어온다면 남은 메모리 공간은 낭비됨
     

## 동적 메모리 할당
* 프로그램이 실행 도중에 메모리를 할당받는 것
```c
int *darray=malloc(10*sizeof(int));
```
* 위의 문장에서는 10개의 정수를 저장할 수 있는 공간을 동적으로 할당받고 있음
* 동적 메모리 할당에서는 필요한 만큼의 메모리를 시스템으로부터 할당받아서 사용하고, 사용이 끝나면 시스템에 메모리를 반납함
* 필요한 만큼만 할당받고 또 필요한 때에 사용하고 반납하기 때문에 메모리를 매우 효율적으로 사용할 수 있음
* 동적 메모리는 malloc()계열의 라이브러리 함수를 사용하여 할당받을 수 있음
* 프로그램이 수행되다가 malloc()함수를 만나면 운영 체제가 호출되어서 필요한 만큼의 동적 메모리를 할당하게 됨

![image](https://github.com/qlkdkd/DataStruct/assets/71871927/af84406d-2ab3-4fb2-a92d-fca58f77519a)

## 동적 메모리 할당 절차
* 먼저 얼마나 할당을 받을 것인지를 결정하고 라이브러리 함수를 호출하여 운영 체제에게 메모리를 요청하는 단계가 필요하다.
* 만약 충분한 메모리가 존재하면 그 요청은 승인되고 메모리가 할당된다.
* 프로그램은 할당된 메모리를 사용한다.
* 사용이 끝나면 메모리를 다시 운영체제에게 반납하는 단계가 필요하다.
    * 만약 메모리를 반납하지 않으면 다른 프로그램이 동적 메모리를 사용할 수 없게 된다. 따라서 반드시 동적 메모리는 명시적으로 반납을 해주어야 한다.
